<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>Feedback</title>

    <link rel="stylesheet" href="./assets/css/feedback.css" />
  </head>

  <body>
    <!-- Sfondo/contenitore principale -->
    <div class="bg">
      <!-- Box centrale con il contenuto -->
      <div class="content">
        <!-- Logo/brand in alto -->
        <header class="brand">
          <img src="./assets/imgs/epicode_logo.png" alt="EPICODE" />
        </header>

        <!-- Titolo principale -->
        <h1>Tell us how it’s going</h1>

        <!-- Testo sottotitolo -->
        <p class="subtitle">
          From 0 to 10, how likely are you to recommend EPICODE<br />
          to a friend or a colleague?
        </p>

        <!-- stelle (voto 1-10) -->
        <div class="stars" id="stars">
          <button class="star" type="button" data-value="1">★</button>
          <button class="star" type="button" data-value="2">★</button>
          <button class="star" type="button" data-value="3">★</button>
          <button class="star" type="button" data-value="4">★</button>
          <button class="star" type="button" data-value="5">★</button>
          <button class="star" type="button" data-value="6">★</button>
          <button class="star" type="button" data-value="7">★</button>
          <button class="star" type="button" data-value="8">★</button>
          <button class="star" type="button" data-value="9">★</button>
          <button class="star" type="button" data-value="10">★</button>
        </div>

        <!-- Suggerimento per lasciare un commento -->
        <p class="hint">Leave us an open feedback about your experience so far</p>

        <!-- Inserimento commento (opzionale) -->
        <div class="field">
          <input id="comment" type="text" placeholder="Write your comment here (Facoltativo)" />
          <div class="underline"></div>
        </div>

        <!-- Bottone per continuare -->
        <button class="cta" id="moreInfoBtn" type="button">MORE INFO</button>
      </div>
    </div>

    <!-- Script JS per gestire stelle e bottone -->
    <script>
      // Prendo gli elementi dal DOM
      const starsWrap = document.getElementById("stars");
      const stars = document.querySelectorAll(".star");
      const moreInfoBtn = document.getElementById("moreInfoBtn");

      // Link dove andare dopo la scelta
      const url = "https://epicode.com";

      // Stato del voto (6 "piene" solo per estetica)
      let rating = 6;
      let rated = false;

      // Aggiorna le stelle "piene" in base al valore passato
      function drawStars(value) {
        for (let i = 0; i < stars.length; i++) {
          if (i < value) stars[i].classList.add("filled");
          else stars[i].classList.remove("filled");
        }
      }

      // Disegno iniziale delle stelle
      drawStars(rating);

      // Eventi su ogni stella
      for (let i = 0; i < stars.length; i++) {
        // mostra l'anteprima del voto
        stars[i].addEventListener("mouseenter", function () {
          drawStars(i + 1);
        });

        // Click: salva il voto definitivo
        stars[i].addEventListener("click", function () {
          rating = i + 1;
          rated = true;
          drawStars(rating);
        });
      }

      // Quando esco dal blocco stelle, torna al voto salvato
      starsWrap.addEventListener("mouseleave", function () {
        drawStars(rating);
      });

      // Click su MORE INFO: controlla se ho scelto un voto
      moreInfoBtn.addEventListener("click", function () {
        if (!rated) {
          alert("Seleziona un voto (da 1 a 10) prima di continuare.");
          return;
        }
        window.location.href = url;
      });
    </script>
  </body>
</html>
